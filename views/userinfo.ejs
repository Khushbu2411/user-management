<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Display all users</title> 
        <link rel="stylesheet" href='/style.css'>
        <!-- <script src='./node_modules/axios/dist/axios.min.js'></script> -->

    </head>
    
    <body>
        <%- include('./partials/nav.ejs') %>
        <p>Get the user info of given id</p> 
        <div id="site-content">
            <form onsubmit="submitForm(this)">
                <label for="id">Enter id:</label>
                <select id="id" name="id">
                    <% for(let i=0; i<data.length; i++) { %>
                    <option value= <%= data[i].id %> ><%= data[i].id %></option>
                    <% } %>
                </select><br>
                <button type="submit" id="submit"> Submit </button>          
            </form>
        </div>
        
        <br>
        <br>
        <a href="/users">Display All Users</a>
        <br><br>
        <%- include('./partials/footer.ejs') %>

        <script>
            function submitForm(that) {
                api='localhost:3000/user/';
                let idValue=that.id.value;
                let url=api+idValue;
                console.log(url);
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        // Typical action to be performed when the document is ready:
                        document.getElementById("demo").innerHTML = xhttp.responseText;
                    }
                };
                xhttp.open("GET", url, true);
                xhttp.send();
                // axios.get(url)
                //     .then(response => {
                //         console.log(response.data);
                //     })
                //     .catch(error => console.error(error));    
            }
        </script>
          
    </body>
</html>        